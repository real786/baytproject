<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link  rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script defer src="https://kit.fontawesome.com/00e77377ee.js" crossorigin="anonymous"></script>
    <title>Home | BaytClothing</title>
</head>
<body>
    <header class="container">
        <nav>
            <div>
                <img width="50px" height="50px" src="assets/logo.jpg" alt="company logo">
            </div>
            <div>
                <a href="/">Home</a>
                <a href="/products">Products</a>
                <a href="/offer">Offers</a>
                <a href="/about">About Us</a>
                <a href="/contact">Contact Us</a>
            </div>
            <div class="social-links">
                <a href="https://instagram.com/"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://tiktok.com/"><i class="fa-brands fa-tiktok"></i></a>
                <a href="https://twitter.com/"><i class="fa-brands fa-twitter"></i></a>
                <a href="https://facebook.com"><i class="fa-brands fa-facebook"></i></a>
            </div>
        </nav>
    </header>

    <section class="container banner">
        <div class="shadow"></div>
        <div class="banner-text">
            <h2>BAYT CLOTHING</h2>
            <p>
                Bayt is a streetwear brand that fuses urban fashion with cultural heritage, offering bold, versatile designs that celebrate global influences and modern trends.</p>
        </div>
    </section>

    <section class="container featured-products">
        <h2>Featured Products</h2>
   
        <div id="products">
            <% products.forEach(product => { %>
                <div class="product">
                    <% if (product.images.length > 0) { %>
                        <img src="<%= product.images[0] %>" alt="<%= product.name %>">
                    <% } %>
                    <h2><%= product.name %></h2>
                    <% if (product.default_price) { %>
                        <p><strong>Price:</strong> $<%= (product.default_price.unit_amount / 100).toFixed(2) %></p>
                        <!-- Order Now Button -->
                        <button class="order-now" onclick="createSession('<%= product.default_price.id %>')">Order Now</button>
                    <% } else { %>
                        <p><strong>Price:</strong> Not available</p>
                    <% } %>
                </div>
            <% }); %>
        </div>
        
    </section>

    <footer>
        <div class="container footer-block">
            <h2>SIGN UP FOR EXCLUSIVE UPDATES AND FOLLOW US ON SOCIAL MEDIA!</h2>
            <div class="footer-email">
                <form action="/subscribe" method="post">
                    <input type="email" name="email" required placeholder="Email">
                    <button type="submit"><i class="fa-solid fa-arrow-right"></i></button>
                </form>
                <div class="social-links">
                    <a href="https://instagram.com/"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://tiktok.com/"><i class="fa-brands fa-tiktok"></i></a>
                    <a href="https://twitter.com/"><i class="fa-brands fa-twitter"></i></a>
                    <a href="https://facebook.com"><i class="fa-brands fa-facebook"></i></a>
                </div>
            </div>
            <div style="margin-top: 13px; text-align: center;">
                <hr>
            <p style="margin-top: 13px;">&copy; All Rights Reserved By BaytClothing</p>
            </div>
        </div>
       
    </footer>




    <script>
     // Function to create the checkout session
async function createSession(priceId) {
    try {
        // Make a request to the server to create the checkout session
        const response = await fetch('/create-checkout-session', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ priceId }),
        });

        const session = await response.json();
        if (session.url) {
            // Redirect the user to the checkout page
            window.location.href = session.url;
        } else {
            alert('Failed to create checkout session');
            }
        } catch (error) {
            console.error('Error during checkout session creation:', error);
            alert('An error occurred. Please try again.');
        }
    }

    </script>
</body>
</html>
